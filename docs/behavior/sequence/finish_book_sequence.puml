@startuml
actor Пользователь
participant UI
participant "BookService" as Service
participant DB

Пользователь -> UI : отметить книгу как прочитанную
UI -> Service : finishBook(book_id)
activate Service

Service -> DB : update status = "finished"
activate DB
DB --> Service
deactivate DB

opt Пользователь указал дату завершения
  Service -> DB : update finished_at
end

Service --> UI : книга завершена
deactivate Service
@enduml
